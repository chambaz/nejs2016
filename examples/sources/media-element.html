<html>
	<head>
		<title>NEJS 2016 - Media Element</title>

		<style>
		body {
			display: flex;
			flex-direction: column;
			justify-content: center;
			align-items: center;
			height: 100%;
		}

		.block {
			text-align: center;
			margin: 20px auto;
		}
		</style>
	</head>
	<body>

		<div class="block">
			<p><strong>Audio Media Element Source</strong></p>
			<audio
				src="/assets/digitalsurgeons.mp3"
				controls
				data-audio-source>
			</audio>
		</div>

		<div class="block">
			<p><strong>Video Media Element Source</strong></p>
			<video
				src="/assets/digitalsurgeons.mp4"
				controls
				data-video-source>
			</video>
		</div>

		<script>
			// create web audio context
			const audioCtx = new (window.AudioContext || window.webkitAudioContext)();

			// DOM nodes used as audio source
			const sourceElements = {
				audio: document.querySelector('[data-audio-source]'),
				video: document.querySelector('[data-video-source]'),
			};

			// create media element source nodes
			const sources = {
				audio: audioCtx.createMediaElementSource(sourceElements.audio),
				video: audioCtx.createMediaElementSource(sourceElements.video),
			};

			// connect source nodes to audio destination
			sources.audio.connect(audioCtx.destination);
			sources.video.connect(audioCtx.destination);

			console.log(audioCtx);
			console.log(sources);
		</script>
	</body>
</html>
