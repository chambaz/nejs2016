<html>
	<head>
		<title>NEJS 2016 - Oscillator</title>
	</head>
	<body>
		<button data-start>Start Oscillator</button>
		<button data-stop>Stop Oscillator</button>

		<script>
			// create web audio context
			const audioCtx = new (window.AudioContext || window.webkitAudioContext)();

			const nodes = {
				start: document.querySelector('[data-start]'),
				stop: document.querySelector('[data-stop]'),
			};

			let oscillator;

			// start button click handler
			// start oscillator
			nodes.start.addEventListener('click', e => {
				if (oscillator) {
					return;
				}
				
				// create oscillator node
				oscillator = audioCtx.createOscillator();

				// set oscillator values
				oscillator.type = 'sine';
				oscillator.frequency.value = 440;

				// connect oscillator to output
				oscillator.connect(audioCtx.destination);
				oscillator.start();
			});

			// stop button click handler
			// stop oscillator
			nodes.stop.addEventListener('click', e => {
				oscillator.stop();
				oscillator = false;
			});

			console.log(audioCtx);
			console.log(oscillator);
		</script>
	</body>
</html>
